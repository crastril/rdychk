[{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\app\\actions\\member.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\app\\api\\og\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\app\\group\\[slug]\\group-client.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Copy' is defined but never used.","line":20,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":25,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Copy"},"fix":{"range":[1046,1052],"text":""},"desc":"Remove unused variable \"Copy\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Check' is defined but never used.","line":20,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":32,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Check"},"fix":{"range":[1052,1059],"text":""},"desc":"Remove unused variable \"Check\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Target' is defined but never used.","line":20,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":40,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Target"},"fix":{"range":[1059,1067],"text":""},"desc":"Remove unused variable \"Target\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Loader2' is defined but never used.","line":20,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":56,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Loader2"},"fix":{"range":[1074,1083],"text":""},"desc":"Remove unused variable \"Loader2\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ModeToggle' is defined but never used.","line":21,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":20,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"ModeToggle"},"fix":{"range":[1126,1180],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AuthButton' is defined but never used.","line":22,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":20,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"AuthButton"},"fix":{"range":[1182,1236],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchGroup'. Either include it or remove the dependency array.","line":77,"column":8,"nodeType":"ArrayExpression","endLine":77,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [fetchGroup, slug]","fix":{"range":[3190,3196],"text":"[fetchGroup, slug]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchMembers'. Either include it or remove the dependency array.","line":113,"column":8,"nodeType":"ArrayExpression","endLine":113,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [fetchMembers, group.id]","fix":{"range":[4172,4183],"text":"[fetchMembers, group.id]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'group'. Either include it or remove the dependency array.","line":137,"column":8,"nodeType":"ArrayExpression","endLine":137,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [group, group.id]","fix":{"range":[4872,4883],"text":"[group, group.id]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":191,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":191,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6583,6586],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6583,6586],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'name' is defined but never used.","line":322,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":322,"endColumn":50}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { notFound, useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { supabase } from '@/lib/supabase';\r\nimport { useAuth } from '@/components/auth-provider';\r\nimport { joinGroupAction, reclaimSessionAction, leaveGroupAction } from '@/app/actions/member';\r\nimport JoinModal from '@/components/JoinModal';\r\nimport MemberList from '@/components/MemberList';\r\nimport ReadyButton from '@/components/ReadyButton';\r\nimport ProgressCounter from '@/components/ProgressCounter';\r\nimport { TimerPicker } from '@/components/TimerPicker';\r\nimport { ShareMenu } from '@/components/ShareMenu';\r\nimport { NotificationManager } from '@/components/NotificationManager';\r\nimport { ManageGroupModal } from '@/components/ManageGroupModal';\r\nimport { TimeProposalModal } from '@/components/TimeProposalModal';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { ArrowLeft, Copy, Check, Target, Users, Loader2, LogOut, Settings } from 'lucide-react';\r\nimport { ModeToggle } from '@/components/mode-toggle';\r\nimport { AuthButton } from '@/components/auth-button';\r\nimport type { Group, Member } from '@/types/database';\r\nimport { LocationCard } from '@/components/LocationCard';\r\nimport { GroupSettingsModal } from '@/components/GroupSettingsModal';\r\nimport { ConnectionStatus } from '@/components/ConnectionStatus';\r\n\r\nexport default function GroupClient({ initialGroup, slug }: { initialGroup: Group, slug: string }) {\r\n    const router = useRouter();\r\n    const [group, setGroup] = useState<Group | null>(initialGroup);\r\n    const [memberId, setMemberId] = useState<string | null>(null);\r\n    const [memberName, setMemberName] = useState<string | null>(null);\r\n    const [isReady, setIsReady] = useState(false);\r\n    const [timerEndTime, setTimerEndTime] = useState<string | null>(null);\r\n    const [members, setMembers] = useState<Member[]>([]);\r\n    const [loadingMembers, setLoadingMembers] = useState(false);\r\n    const [isManageModalOpen, setIsManageModalOpen] = useState(false);\r\n    const [isSettingsModalOpen, setIsSettingsModalOpen] = useState(false);\r\n\r\n    const fetchGroup = async () => {\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from('groups')\r\n                .select('*')\r\n                .eq('slug', slug)\r\n                .single();\r\n\r\n            if (error) {\r\n                throw error;\r\n            }\r\n\r\n            if (!data) {\r\n                notFound();\r\n            }\r\n\r\n            setGroup(data);\r\n        } catch (error) {\r\n            console.error(\"Error fetching group:\", error);\r\n        }\r\n    };\r\n\r\n    const fetchMembers = async () => {\r\n        if (!group?.id) return;\r\n        setLoadingMembers(true);\r\n        const { data } = await supabase\r\n            .from('members')\r\n            .select('*')\r\n            .eq('group_id', group.id)\r\n            .order('joined_at', { ascending: true });\r\n\r\n        if (data) setMembers(data);\r\n        setLoadingMembers(false);\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchGroup();\r\n    }, [slug]);\r\n\r\n    useEffect(() => {\r\n        const storedMemberId = localStorage.getItem(`member_${slug}`);\r\n        const storedMemberName = localStorage.getItem(`member_name_${slug}`);\r\n\r\n        if (storedMemberId) {\r\n            setMemberId(storedMemberId);\r\n            setMemberName(storedMemberName);\r\n        }\r\n    }, [slug]);\r\n\r\n    useEffect(() => {\r\n        if (!group?.id) return;\r\n\r\n        fetchMembers();\r\n\r\n        const channel = supabase\r\n            .channel(`members_count:${group.id}`)\r\n            .on(\r\n                'postgres_changes',\r\n                {\r\n                    event: '*',\r\n                    schema: 'public',\r\n                    table: 'members',\r\n                    filter: `group_id=eq.${group.id}`,\r\n                },\r\n                () => {\r\n                    fetchMembers();\r\n                }\r\n            )\r\n            .subscribe();\r\n\r\n        return () => {\r\n            supabase.removeChannel(channel);\r\n        };\r\n    }, [group?.id]);\r\n\r\n    useEffect(() => {\r\n        if (!group) return;\r\n\r\n        const channel = supabase\r\n            .channel(`group:${group.id}`)\r\n            .on(\r\n                'postgres_changes',\r\n                {\r\n                    event: 'UPDATE',\r\n                    schema: 'public',\r\n                    table: 'groups',\r\n                    filter: `id=eq.${group.id}`,\r\n                },\r\n                (payload) => {\r\n                    setGroup(prev => (prev ? { ...prev, ...payload.new as Group } : payload.new as Group));\r\n                }\r\n            )\r\n            .subscribe();\r\n\r\n        return () => {\r\n            supabase.removeChannel(channel);\r\n        };\r\n    }, [group?.id]);\r\n\r\n    const handleRefresh = async () => {\r\n        // Refresh server components\r\n        router.refresh();\r\n\r\n        // Refresh client data\r\n        await Promise.all([\r\n            fetchGroup(),\r\n            fetchMembers()\r\n        ]);\r\n    };\r\n\r\n    useEffect(() => {\r\n        const ensureAdmin = async () => {\r\n            if (members.length > 0) {\r\n                const hasAdmin = members.some(m => m.role === 'admin');\r\n\r\n                if (!hasAdmin) {\r\n                    // Promote the first member (effectively the creator/oldest)\r\n                    const candidate = members[0];\r\n                    if (candidate) {\r\n\r\n                        // Persist to DB\r\n                        const { error } = await supabase\r\n                            .from('members')\r\n                            .update({ role: 'admin' })\r\n                            .eq('id', candidate.id);\r\n\r\n                        if (!error) {\r\n                            // Force local update to reflect change immediately\r\n                            setMembers(prev => prev.map(m => m.id === candidate.id ? { ...m, role: 'admin' } : m));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        ensureAdmin();\r\n    }, [members]);\r\n\r\n    useEffect(() => {\r\n        if (!memberId) return;\r\n\r\n        const channel = supabase\r\n            .channel(`member:${memberId}`)\r\n            .on(\r\n                'postgres_changes',\r\n                {\r\n                    event: 'UPDATE',\r\n                    schema: 'public',\r\n                    table: 'members',\r\n                    filter: `id=eq.${memberId}`,\r\n                },\r\n                (payload: any) => {\r\n                    setIsReady(payload.new.is_ready);\r\n                    setTimerEndTime(payload.new.timer_end_time);\r\n                }\r\n            )\r\n            .subscribe();\r\n\r\n        const fetchMemberStatus = async () => {\r\n            const { data } = await supabase\r\n                .from('members')\r\n                .select('is_ready, timer_end_time')\r\n                .eq('id', memberId)\r\n                .single();\r\n\r\n            if (data) {\r\n                setIsReady(data.is_ready);\r\n                setTimerEndTime(data.timer_end_time);\r\n            }\r\n        };\r\n\r\n        fetchMemberStatus();\r\n\r\n        return () => {\r\n            supabase.removeChannel(channel);\r\n        };\r\n    }, [memberId]);\r\n\r\n    const guestMembers = members.filter(m => {\r\n        // Explicit check for null/undefined to catch any weirdness\r\n        return m.user_id === null || m.user_id === undefined;\r\n    });\r\n\r\n\r\n    const { user } = useAuth();\r\n\r\n    // Auto-reconnect for logged-in users who navigate here (e.g. from history)\r\n    useEffect(() => {\r\n        const checkMembership = async () => {\r\n            if (user && group?.id && !memberId) {\r\n                const { data } = await supabase\r\n                    .from('members')\r\n                    .select('*')\r\n                    .eq('group_id', group.id)\r\n                    .eq('user_id', user.id)\r\n                    .single();\r\n\r\n                if (data) {\r\n                    setMemberId(data.id);\r\n                    setMemberName(data.name);\r\n                    setIsReady(data.is_ready);\r\n                    setTimerEndTime(data.timer_end_time);\r\n                    localStorage.setItem(`member_${slug}`, data.id);\r\n                    localStorage.setItem(`member_name_${slug}`, data.name);\r\n                }\r\n            }\r\n        };\r\n\r\n        checkMembership();\r\n    }, [user, group?.id, memberId, slug]);\r\n\r\n    const handleJoin = async (name: string) => {\r\n        if (!group) return;\r\n\r\n        // Note: With Server Actions doing the heavy lifting and security,\r\n        // we mainly just call the action and handle the local state here.\r\n        // We still check if logged-in user is already a member locally if possible to save a trip,\r\n        // but the action itself is safe.\r\n\r\n        const result = await joinGroupAction(group.id, slug, name, user?.id);\r\n\r\n        if (result.success && result.member) {\r\n            setMemberId(result.member.id);\r\n            setMemberName(result.member.name);\r\n            setIsReady(false);\r\n\r\n            // Still keep local storage for UX convenience, but SECURITY relies on the httpOnly cookie\r\n            // set by the server action.\r\n            localStorage.setItem(`member_${slug}`, result.member.id);\r\n            localStorage.setItem(`member_name_${slug}`, result.member.name);\r\n        } else {\r\n            console.error('Error joining group via action:', result.error);\r\n            // Handle error (e.g., unique constraint on user_id if already joined)\r\n            // If we hit the race condition where they exist, we could fetch them here or the action could handle returning them.\r\n            if (user) {\r\n                const { data: existingMember } = await supabase\r\n                    .from('members')\r\n                    .select('*')\r\n                    .eq('group_id', group.id)\r\n                    .eq('user_id', user.id)\r\n                    .single();\r\n\r\n                if (existingMember) {\r\n                    setMemberId(existingMember.id);\r\n                    setMemberName(existingMember.name);\r\n                    setIsReady(existingMember.is_ready);\r\n                    setTimerEndTime(existingMember.timer_end_time);\r\n                    localStorage.setItem(`member_${slug}`, existingMember.id);\r\n                    localStorage.setItem(`member_name_${slug}`, existingMember.name);\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n\r\n    const handleLeaveGroup = async () => {\r\n        if (!memberId) return;\r\n\r\n        // Optimistic UI update\r\n        const idToRemove = memberId;\r\n        setMemberId(null);\r\n        setMemberName(null);\r\n        localStorage.removeItem(`member_${slug}`);\r\n        localStorage.removeItem(`member_name_${slug}`);\r\n\r\n        try {\r\n            const result = await leaveGroupAction(slug, idToRemove);\r\n            if (result.success) {\r\n                router.push('/');\r\n            } else {\r\n                console.error(\"Error leaving group server action:\", result.error);\r\n                // In a real app we might revert the optimistic UI if it failed, \r\n                // but usually leaving is final for the user's intent.\r\n                router.push('/');\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error leaving group:\", error);\r\n            // Revert state if needed? For now we assume success or user can reload.\r\n        }\r\n    };\r\n\r\n    const handleReclaim = async (id: string, name: string) => {\r\n        // Double check it exists locally\r\n        const member = members.find(m => m.id === id);\r\n        if (member) {\r\n            const result = await reclaimSessionAction(slug, member.id);\r\n            if (result.success) {\r\n                setMemberId(member.id);\r\n                setMemberName(member.name);\r\n                setIsReady(member.is_ready);\r\n                setTimerEndTime(member.timer_end_time);\r\n                localStorage.setItem(`member_${slug}`, member.id);\r\n                localStorage.setItem(`member_name_${slug}`, member.name);\r\n            } else {\r\n                console.error(\"Failed to reclaim session securely\");\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n\r\n    if (!group) {\r\n        return null;\r\n    }\r\n\r\n    const readyCount = members.filter((m) => m.is_ready).length;\r\n    const totalCount = members.length;\r\n    const currentMember = members.find(m => m.id === memberId);\r\n    const isAdmin = currentMember?.role === 'admin';\r\n\r\n\r\n    return (\r\n        <div className=\"min-h-screen\">\r\n            <ConnectionStatus onRefresh={handleRefresh} />\r\n            {!memberId && (\r\n                <JoinModal\r\n                    onJoin={handleJoin}\r\n                    onReclaim={handleReclaim}\r\n                    groupName={group.name}\r\n                    existingGuests={guestMembers}\r\n                />\r\n            )}\r\n\r\n            <NotificationManager\r\n                readyCount={readyCount}\r\n                totalCount={totalCount}\r\n                groupName={group.name}\r\n            />\r\n\r\n            <div className=\"max-w-2xl mx-auto p-6 space-y-6\">\r\n                {/* Header */}\r\n                <div className=\"space-y-6\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <Button\r\n                                asChild\r\n                                variant=\"ghost\"\r\n                                size=\"icon\"\r\n                            >\r\n                                <Link href=\"/\">\r\n                                    <ArrowLeft className=\"w-5 h-5\" />\r\n                                </Link>\r\n                            </Button>\r\n                            <div>\r\n                                <h1 className=\"text-2xl font-bold\">\r\n                                    {group.name}\r\n                                </h1>\r\n                                <p className=\"text-sm text-muted-foreground\">\r\n                                    {totalCount} {totalCount === 1 ? 'membre' : 'membres'}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center gap-2\">\r\n                            {isAdmin && (\r\n                                <Button\r\n                                    variant=\"outline\"\r\n                                    size=\"sm\"\r\n                                    className=\"gap-2\"\r\n                                    onClick={() => setIsSettingsModalOpen(true)}\r\n                                >\r\n                                    <Settings className=\"w-4 h-4\" />\r\n                                    Paramètres\r\n                                </Button>\r\n                            )}\r\n                            <ShareMenu\r\n                                groupName={group.name}\r\n                                url={typeof window !== 'undefined' ? window.location.href : ''}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Progress Bar in Header */}\r\n                    <div className=\"bg-card/50 rounded-xl border p-4 backdrop-blur-sm\">\r\n                        <ProgressCounter readyCount={readyCount} totalCount={totalCount} />\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                {\r\n                    memberId && (\r\n                        <>\r\n                            {/* Your Status Card */}\r\n\r\n                            {/* Your Status Card */}\r\n                            <Card>\r\n                                <CardHeader>\r\n                                    <div className=\"flex justify-between items-center\">\r\n                                        <CardTitle className=\"text-lg\">Votre statut</CardTitle>\r\n                                        <div className=\"flex gap-2\">\r\n\r\n                                            <Button\r\n                                                variant=\"ghost\"\r\n                                                size=\"sm\"\r\n                                                className=\"text-muted-foreground hover:text-destructive hover:bg-destructive/10 -mr-2\"\r\n                                                onClick={() => {\r\n                                                    if (confirm(\"Voulez-vous vraiment quitter ce groupe ?\")) {\r\n                                                        handleLeaveGroup();\r\n                                                    }\r\n                                                }}\r\n                                            >\r\n                                                <LogOut className=\"w-4 h-4 mr-2\" />\r\n                                                Quitter\r\n                                            </Button>\r\n                                        </div>\r\n                                    </div>\r\n                                    <CardDescription>{memberName}</CardDescription>\r\n                                </CardHeader>\r\n                                <CardContent>\r\n                                    <div className=\"flex flex-col gap-3\">\r\n                                        <ReadyButton\r\n                                            slug={slug}\r\n                                            memberId={memberId}\r\n                                            isReady={isReady}\r\n                                            timerEndTime={timerEndTime}\r\n                                        />\r\n                                        <TimerPicker\r\n                                            memberId={memberId}\r\n                                            currentTimerEnd={timerEndTime}\r\n                                            isReady={isReady}\r\n                                        />\r\n                                        <TimeProposalModal\r\n                                            memberId={memberId}\r\n                                            currentProposedTime={currentMember?.proposed_time ?? null}\r\n                                        />\r\n                                    </div>\r\n                                </CardContent>\r\n                            </Card>\r\n\r\n                            {/* Location Card (if In Person) */}\r\n                            {group.type === 'in_person' && (\r\n                                <LocationCard\r\n                                    group={group}\r\n                                    memberId={memberId}\r\n                                    isAdmin={isAdmin}\r\n                                    currentMemberName={memberName}\r\n                                    onLocationUpdate={(newLocation) => {\r\n                                        setGroup(prev => prev ? { ...prev, location: newLocation } : null);\r\n                                    }}\r\n                                />\r\n                            )}\r\n\r\n                            {/* Members Card */}\r\n                            <Card>\r\n                                <CardHeader>\r\n                                    <div className=\"flex items-center justify-between\">\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <Users className=\"w-5 h-5 text-muted-foreground\" />\r\n                                            <CardTitle className=\"text-lg\">Membres</CardTitle>\r\n                                        </div>\r\n                                        {isAdmin && (\r\n                                            <Button\r\n                                                variant=\"outline\"\r\n                                                size=\"sm\"\r\n                                                className=\"h-8\"\r\n                                                onClick={() => setIsManageModalOpen(true)}\r\n                                            >\r\n                                                Gérer\r\n                                            </Button>\r\n                                        )}\r\n                                    </div>\r\n                                </CardHeader>\r\n                                <CardContent>\r\n                                    <MemberList members={members} loading={loadingMembers} currentMemberId={memberId} />\r\n                                </CardContent>\r\n                            </Card>\r\n\r\n                            <ManageGroupModal\r\n                                isOpen={isManageModalOpen}\r\n                                onOpenChange={setIsManageModalOpen}\r\n                                groupId={group.id}\r\n                                members={members}\r\n                                loading={loadingMembers}\r\n                                onRefresh={fetchMembers}\r\n                                currentMemberId={memberId}\r\n                            />\r\n\r\n                            <GroupSettingsModal\r\n                                isOpen={isSettingsModalOpen}\r\n                                onOpenChange={setIsSettingsModalOpen}\r\n                                groupId={group.id}\r\n                            />\r\n                        </>\r\n                    )\r\n                }\r\n            </div >\r\n        </div >\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\app\\group\\[slug]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\app\\page.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":117,"column":26,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[4534,4586],"text":"\r\n              Voir tout l&apos;historique\r\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[4534,4586],"text":"\r\n              Voir tout l&lsquo;historique\r\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[4534,4586],"text":"\r\n              Voir tout l&#39;historique\r\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[4534,4586],"text":"\r\n              Voir tout l&rsquo;historique\r\n            "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport CreateGroupForm from '@/components/CreateGroupForm';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Sparkles, History as HistoryIcon, ArrowRight, Clock } from 'lucide-react';\r\nimport { useAuth } from '@/components/auth-provider';\r\nimport { supabase } from '@/lib/supabase';\r\nimport Link from 'next/link';\r\nimport { Button } from '@/components/ui/button';\r\nimport { GroupHistoryModal } from '@/components/GroupHistoryModal';\r\n\r\nexport default function Home() {\r\n  const { user } = useAuth();\r\n  const [lastGroup, setLastGroup] = useState<{ name: string; slug: string; joined_at: string } | null>(null);\r\n  const [historyOpen, setHistoryOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    async function fetchLastGroup() {\r\n      if (!user) return;\r\n\r\n      const { data } = await supabase\r\n        .from('members')\r\n        .select(`\r\n          joined_at,\r\n          groups (\r\n            name,\r\n            slug\r\n          )\r\n        `)\r\n        .eq('user_id', user.id)\r\n        .order('joined_at', { ascending: false })\r\n        .limit(1)\r\n        .single();\r\n\r\n      if (data && data.groups) {\r\n        // Handle potential array or object return from Supabase\r\n        const groupData = Array.isArray(data.groups) ? data.groups[0] : data.groups;\r\n        if (groupData) {\r\n          setLastGroup({\r\n            name: groupData.name,\r\n            slug: groupData.slug,\r\n            joined_at: data.joined_at\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    fetchLastGroup();\r\n  }, [user]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center p-6 relative\">\r\n      <main className=\"w-full max-w-md space-y-8\">\r\n        {/* Header */}\r\n        <div className=\"text-center space-y-4\">\r\n          <div className=\"inline-flex items-center justify-center w-16 h-16 bg-primary rounded-2xl mb-4\">\r\n            <Sparkles className=\"w-8 h-8 text-primary-foreground\" />\r\n          </div>\r\n          <h1 className=\"text-5xl font-bold\">\r\n            rdychk\r\n          </h1>\r\n          <p className=\"text-lg text-muted-foreground\">\r\n            Sync Status, Instantly\r\n          </p>\r\n        </div>\r\n\r\n        {/* Form Card */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Créer un groupe</CardTitle>\r\n            <CardDescription>\r\n              Lancez un nouveau groupe et partagez le lien avec vos amis\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <CreateGroupForm />\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* History Section */}\r\n        {user && (\r\n          <div className=\"space-y-4 animate-slide-up\">\r\n            {lastGroup && (\r\n              <div className=\"relative\">\r\n                <div className=\"absolute inset-0 bg-gradient-to-t from-background to-transparent z-10 pointer-events-none\" />\r\n                <h3 className=\"text-sm font-medium text-muted-foreground mb-3 px-1\">Reprendre</h3>\r\n                <Link href={`/group/${lastGroup.slug}`}>\r\n                  <Card className=\"hover:bg-accent/50 transition-colors cursor-pointer group border-primary/20\">\r\n                    <CardContent className=\"p-4 flex items-center justify-between\">\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center\">\r\n                          <Clock className=\"w-5 h-5 text-primary\" />\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"font-semibold group-hover:text-primary transition-colors\">\r\n                            {lastGroup.name}\r\n                          </p>\r\n                          <p className=\"text-xs text-muted-foreground\">\r\n                            Rejoint le {new Date(lastGroup.joined_at).toLocaleDateString()}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      <ArrowRight className=\"w-5 h-5 text-muted-foreground group-hover:translate-x-1 transition-transform\" />\r\n                    </CardContent>\r\n                  </Card>\r\n                </Link>\r\n              </div>\r\n            )}\r\n\r\n            <Button\r\n              variant=\"ghost\"\r\n              className=\"w-full gap-2 text-muted-foreground\"\r\n              onClick={() => setHistoryOpen(true)}\r\n            >\r\n              <HistoryIcon className=\"w-4 h-4\" />\r\n              Voir tout l'historique\r\n            </Button>\r\n\r\n            <GroupHistoryModal open={historyOpen} onOpenChange={setHistoryOpen} />\r\n          </div>\r\n        )}\r\n\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\ConnectionStatus.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Wifi' is defined but never used.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":14,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Wifi"},"fix":{"range":[72,77],"text":""},"desc":"Remove unused variable \"Wifi\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cn' is defined but never used.","line":13,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":12,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"cn"},"fix":{"range":[309,342],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":119,"column":31,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[4646,4782],"text":"\r\n                        Nous n&apos;arrivons pas à récupérer les dernières informations. Veuillez rafraîchir la page.\r\n                    "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[4646,4782],"text":"\r\n                        Nous n&lsquo;arrivons pas à récupérer les dernières informations. Veuillez rafraîchir la page.\r\n                    "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[4646,4782],"text":"\r\n                        Nous n&#39;arrivons pas à récupérer les dernières informations. Veuillez rafraîchir la page.\r\n                    "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[4646,4782],"text":"\r\n                        Nous n&rsquo;arrivons pas à récupérer les dernières informations. Veuillez rafraîchir la page.\r\n                    "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleSmartRefresh'. Either include it or remove the dependency array.","line":66,"column":8,"nodeType":"ArrayExpression","endLine":66,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [handleSmartRefresh, lastVisibleTime]","fix":{"range":[2456,2473],"text":"[handleSmartRefresh, lastVisibleTime]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { Wifi, WifiOff, RefreshCw } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { cn } from '@/lib/utils';\r\n\r\n// Threshold for auto-refresh in milliseconds (e.g., 5 minutes)\r\nconst REFRESH_THRESHOLD = 5 * 60 * 1000;\r\n\r\ninterface ConnectionStatusProps {\r\n    onRefresh: () => Promise<void>;\r\n}\r\n\r\nexport function ConnectionStatus({ onRefresh }: ConnectionStatusProps) {\r\n    const [isOffline, setIsOffline] = useState(false);\r\n    const [lastVisibleTime, setLastVisibleTime] = useState<number>(Date.now());\r\n    const [showRefreshModal, setShowRefreshModal] = useState(false);\r\n    const [isRefreshing, setIsRefreshing] = useState(false);\r\n\r\n    useEffect(() => {\r\n        // Handle Online/Offline status\r\n        const handleOnline = () => {\r\n            setIsOffline(false);\r\n            handleSmartRefresh();\r\n        };\r\n        const handleOffline = () => setIsOffline(true);\r\n\r\n        window.addEventListener('online', handleOnline);\r\n        window.addEventListener('offline', handleOffline);\r\n\r\n        // Handle Visibility Change (Tab switch / Mobile wake up)\r\n        const handleVisibilityChange = () => {\r\n            if (document.visibilityState === 'visible') {\r\n                const now = Date.now();\r\n                const timeDiff = now - lastVisibleTime;\r\n\r\n                if (timeDiff > REFRESH_THRESHOLD) {\r\n                    console.log(`User returned after ${timeDiff / 1000}s. Refreshing...`);\r\n                    handleSmartRefresh();\r\n                } else {\r\n                    // Even if short absence, consider a quick silent poll? \r\n                    // For now, let's stick to the threshold to avoid spamming.\r\n                }\r\n                setLastVisibleTime(now);\r\n            } else {\r\n                setLastVisibleTime(Date.now());\r\n            }\r\n        };\r\n\r\n        document.addEventListener('visibilitychange', handleVisibilityChange);\r\n\r\n        return () => {\r\n            window.removeEventListener('online', handleOnline);\r\n            window.removeEventListener('offline', handleOffline);\r\n            document.removeEventListener('visibilitychange', handleVisibilityChange);\r\n        };\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [lastVisibleTime]); // Depend on lastVisibleTime to calculate diff correctly\r\n\r\n    const handleSmartRefresh = async () => {\r\n        setIsRefreshing(true);\r\n        try {\r\n            await onRefresh();\r\n        } catch (error) {\r\n            console.error(\"Auto-refresh failed:\", error);\r\n            // Optionally show modal if refresh fails critically\r\n            setShowRefreshModal(true);\r\n        } finally {\r\n            setIsRefreshing(false);\r\n        }\r\n    };\r\n\r\n    const handleManualRefresh = () => {\r\n        window.location.reload();\r\n    };\r\n\r\n    if (isOffline) {\r\n        return (\r\n            <div className=\"fixed bottom-4 left-4 right-4 z-50 animate-in slide-in-from-bottom-5\">\r\n                <div className=\"bg-destructive text-destructive-foreground px-4 py-3 rounded-lg shadow-lg flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <WifiOff className=\"h-4 w-4\" />\r\n                        <span className=\"font-medium text-sm\">Connexion perdue</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (isRefreshing && !showRefreshModal) {\r\n        // Optional: Show a tiny indicator? \r\n        // For now, let's keep it silent or minimal.\r\n        // Maybe a small spinner top right?\r\n        // User didn't explicitly ask for a spinner, but \"updating...\" toast was mentioned.\r\n        return (\r\n            <div className=\"fixed top-16 left-1/2 -translate-x-1/2 z-50 pointer-events-none\">\r\n                <div className=\"bg-background/80 backdrop-blur-sm border px-3 py-1.5 rounded-full shadow-sm flex items-center gap-2 text-xs text-muted-foreground animate-in fade-in slide-in-from-top-2\">\r\n                    <RefreshCw className=\"h-3 w-3 animate-spin\" />\r\n                    <span>Mise à jour...</span>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Dialog open={showRefreshModal} onOpenChange={setShowRefreshModal}>\r\n            <DialogContent>\r\n                <DialogHeader>\r\n                    <DialogTitle>Mise à jour nécessaire</DialogTitle>\r\n                    <DialogDescription>\r\n                        Nous n'arrivons pas à récupérer les dernières informations. Veuillez rafraîchir la page.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n                <Button onClick={handleManualRefresh} className=\"w-full\">\r\n                    <RefreshCw className=\"mr-2 h-4 w-4\" />\r\n                    Rafraîchir la page\r\n                </Button>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\CreateGroupForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\EditLocationModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Textarea' is defined but never used.","line":16,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":18,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Textarea"},"fix":{"range":[432,484],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[803,806],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[803,806],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":147,"column":49,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5615,5724],"text":"\r\n                            Permet aux membres d&apos;ouvrir l'itinéraire directement.\r\n                        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5615,5724],"text":"\r\n                            Permet aux membres d&lsquo;ouvrir l'itinéraire directement.\r\n                        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5615,5724],"text":"\r\n                            Permet aux membres d&#39;ouvrir l'itinéraire directement.\r\n                        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5615,5724],"text":"\r\n                            Permet aux membres d&rsquo;ouvrir l'itinéraire directement.\r\n                        "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":147,"column":58,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5615,5724],"text":"\r\n                            Permet aux membres d'ouvrir l&apos;itinéraire directement.\r\n                        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5615,5724],"text":"\r\n                            Permet aux membres d'ouvrir l&lsquo;itinéraire directement.\r\n                        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5615,5724],"text":"\r\n                            Permet aux membres d'ouvrir l&#39;itinéraire directement.\r\n                        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5615,5724],"text":"\r\n                            Permet aux membres d'ouvrir l&rsquo;itinéraire directement.\r\n                        "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":156,"column":56,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[6191,6296],"text":"\r\n                                        Chargement de l&apos;aperçu...\r\n                                    "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[6191,6296],"text":"\r\n                                        Chargement de l&lsquo;aperçu...\r\n                                    "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[6191,6296],"text":"\r\n                                        Chargement de l&#39;aperçu...\r\n                                    "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[6191,6296],"text":"\r\n                                        Chargement de l&rsquo;aperçu...\r\n                                    "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":163,"column":49,"nodeType":"JSXOpeningElement","endLine":168,"endColumn":51,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogDescription,\r\n} from '@/components/ui/dialog';\r\nimport { supabase } from '@/lib/supabase';\r\nimport { Loader2 } from 'lucide-react';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Textarea } from '@/components/ui/textarea';\r\n\r\ninterface EditLocationModalProps {\r\n    isOpen: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    groupId: string;\r\n    existingLocation?: { name: string; address?: string; link?: string } | null;\r\n    currentMemberName: string | null;\r\n    currentMemberId: string | null;\r\n    onLocationUpdate: (location: any) => void;\r\n}\r\n\r\nexport function EditLocationModal({ isOpen, onOpenChange, groupId, existingLocation, currentMemberName, currentMemberId, onLocationUpdate }: EditLocationModalProps) {\r\n    const [name, setName] = useState('');\r\n    const [link, setLink] = useState('');\r\n    const [saving, setSaving] = useState(false);\r\n    const [isFetchingPreview, setIsFetchingPreview] = useState(false);\r\n    const [preview, setPreview] = useState<{ title?: string; description?: string; image?: string } | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            if (existingLocation) {\r\n                setName(existingLocation.name || '');\r\n                setLink(existingLocation.link || '');\r\n            } else {\r\n                setName('');\r\n                setLink('');\r\n            }\r\n        }\r\n    }, [isOpen, existingLocation]);\r\n\r\n    // Debounced preview fetch\r\n    useEffect(() => {\r\n        const fetchPreview = async () => {\r\n            if (!link || !link.startsWith('http')) {\r\n                setPreview(null);\r\n                return;\r\n            }\r\n\r\n            setIsFetchingPreview(true);\r\n            try {\r\n                const res = await fetch(`/api/og?url=${encodeURIComponent(link)}`);\r\n                if (res.ok) {\r\n                    const data = await res.json();\r\n                    if (data.title || data.image) { // Only set if we got meaningful data\r\n                        setPreview(data);\r\n                        if (data.title) {\r\n                            // Clean up Google Maps title: remove \" - Google Maps\" and unwanted separators like \" · \"\r\n                            let cleanName = data.title.replace(/ - Google Maps$/, '');\r\n                            cleanName = cleanName.split(' · ')[0];\r\n                            setName(cleanName);\r\n                        }\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Failed to fetch preview\", error);\r\n            } finally {\r\n                setIsFetchingPreview(false);\r\n            }\r\n        };\r\n\r\n        const timer = setTimeout(fetchPreview, 1000);\r\n        return () => clearTimeout(timer);\r\n    }, [link]);\r\n\r\n    const handleSave = async () => {\r\n        if (!name.trim()) return;\r\n        setSaving(true);\r\n\r\n        const newLocation = {\r\n            name: name.trim(),\r\n            link: link.trim() || null,\r\n            address: '', // We are simplifying to just name + link per user request\r\n            image: preview?.image || null,\r\n            description: preview?.description || null,\r\n            preview_title: preview?.title || null,\r\n            proposed_by: currentMemberName,\r\n            proposed_by_id: currentMemberId\r\n        };\r\n\r\n        try {\r\n            const { error } = await supabase\r\n                .from('groups')\r\n                .update({ location: newLocation })\r\n                .eq('id', groupId);\r\n\r\n            if (error) throw error;\r\n\r\n            // Reset votes when location changes\r\n            await supabase.from('location_votes').delete().eq('group_id', groupId);\r\n\r\n            onLocationUpdate(newLocation);\r\n            onOpenChange(false);\r\n        } catch (err) {\r\n            console.error(err);\r\n            alert(\"Erreur lors de l'enregistrement du lieu.\");\r\n        } finally {\r\n            setSaving(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={isOpen} onOpenChange={onOpenChange}>\r\n            <DialogContent className=\"max-w-md\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Modifier le lieu</DialogTitle>\r\n                    <DialogDescription>\r\n                        Indiquez où le groupe doit se retrouver.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <div className=\"space-y-4 py-4\">\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"loc-name\">Nom du lieu <span className=\"text-destructive\">*</span></Label>\r\n                        <Input\r\n                            id=\"loc-name\"\r\n                            placeholder=\"Ex: Bar de la Plage, Chez Marco...\"\r\n                            value={name}\r\n                            onChange={(e) => setName(e.target.value)}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"loc-link\">Lien Google Maps (facultatif)</Label>\r\n                        <Input\r\n                            id=\"loc-link\"\r\n                            placeholder=\"https://maps.google.com/...\"\r\n                            value={link}\r\n                            onChange={(e) => setLink(e.target.value)}\r\n                        />\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                            Permet aux membres d'ouvrir l'itinéraire directement.\r\n                        </p>\r\n\r\n                        {/* Link Preview */}\r\n                        {(isFetchingPreview || preview) && (\r\n                            <div className=\"mt-2 border rounded-md overflow-hidden bg-muted/30\">\r\n                                {isFetchingPreview ? (\r\n                                    <div className=\"p-3 flex items-center gap-2 text-muted-foreground text-sm\">\r\n                                        <Loader2 className=\"w-3 h-3 animate-spin\" />\r\n                                        Chargement de l'aperçu...\r\n                                    </div>\r\n                                ) : preview && (\r\n                                    <div className=\"flex h-16\">\r\n                                        {preview.image && (\r\n                                            <div className=\"w-20 h-full shrink-0 relative border-r\">\r\n                                                {/* eslint-disable-next-line @next/next/no-img-element */}\r\n                                                <img\r\n                                                    src={preview.image}\r\n                                                    alt=\"Preview\"\r\n                                                    className=\"w-full h-full object-cover\"\r\n                                                    referrerPolicy=\"no-referrer\"\r\n                                                />\r\n                                            </div>\r\n                                        )}\r\n                                        <div className=\"p-2 flex-1 min-w-0 flex flex-col justify-center\">\r\n                                            <div className=\"font-semibold text-xs line-clamp-1\">{preview.title}</div>\r\n                                            {preview.description && (\r\n                                                <div className=\"text-[10px] text-muted-foreground line-clamp-2 leading-tight mt-0.5\">\r\n                                                    {preview.description}\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"flex justify-end pt-4\">\r\n                        <Button onClick={handleSave} disabled={saving || !name.trim() || isFetchingPreview}>\r\n                            {saving ? (\r\n                                <>\r\n                                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                                    Enregistrement...\r\n                                </>\r\n                            ) : (\r\n                                \"Valider le lieu\"\r\n                            )}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\GroupHistoryModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DialogTrigger' is defined but never used.","line":5,"column":79,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":92,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"DialogTrigger"},"fix":{"range":[170,185],"text":""},"desc":"Remove unused variable \"DialogTrigger\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertTriangle' is defined but never used.","line":8,"column":50,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":63,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"AlertTriangle"},"fix":{"range":[376,391],"text":""},"desc":"Remove unused variable \"AlertTriangle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'VisuallyHidden' is defined but never used.","line":11,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":24,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"VisuallyHidden"},"fix":{"range":[515,580],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchGroups'. Either include it or remove the dependency array.","line":95,"column":8,"nodeType":"ArrayExpression","endLine":95,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [fetchGroups, open, user]","fix":{"range":[3365,3377],"text":"[fetchGroups, open, user]"}}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":142,"column":42,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5311,5359],"text":"Vous n&apos;avez rejoint aucun groupe pour le moment."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5311,5359],"text":"Vous n&lsquo;avez rejoint aucun groupe pour le moment."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5311,5359],"text":"Vous n&#39;avez rejoint aucun groupe pour le moment."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5311,5359],"text":"Vous n&rsquo;avez rejoint aucun groupe pour le moment."},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { Loader2, ExternalLink, LogOut, History, AlertTriangle } from 'lucide-react';\r\nimport { supabase } from '@/lib/supabase';\r\nimport { useAuth } from '@/components/auth-provider';\r\nimport { VisuallyHidden } from '@radix-ui/react-visually-hidden';\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\n\r\ninterface JoinedGroup {\r\n    id: string;\r\n    group_id: string;\r\n    joined_at: string;\r\n    groups: {\r\n        name: string;\r\n        slug: string;\r\n    };\r\n}\r\n\r\ninterface GroupHistoryModalProps {\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nexport function GroupHistoryModal({ open, onOpenChange }: GroupHistoryModalProps) {\r\n    const { user } = useAuth();\r\n    const [groups, setGroups] = useState<JoinedGroup[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [leavingId, setLeavingId] = useState<string | null>(null); // group_id to leave\r\n    const [confirmLeaveId, setConfirmLeaveId] = useState<string | null>(null);\r\n\r\n    const fetchGroups = async () => {\r\n        if (!user) return;\r\n        setLoading(true);\r\n        try {\r\n            // Get membership details with joined group data\r\n            const { data, error } = await supabase\r\n                .from('members')\r\n                .select('id, group_id, joined_at, groups(name, slug)')\r\n                .eq('user_id', user.id)\r\n                .order('joined_at', { ascending: false });\r\n\r\n            if (error) throw error;\r\n\r\n            if (!data) {\r\n                setGroups([]);\r\n                return;\r\n            }\r\n\r\n            // Transform data to match JoinedGroup interface\r\n            const joinedGroups: JoinedGroup[] = (data as unknown as { id: string; group_id: string; joined_at: string; groups: { name: string; slug: string } | { name: string; slug: string }[] }[])\r\n                .map((member) => {\r\n                    // Supabase join can return array or single object depending on relationship cardinality\r\n                    const group = Array.isArray(member.groups) ? member.groups[0] : member.groups;\r\n\r\n                    if (!group) return null;\r\n\r\n                    return {\r\n                        id: member.id,\r\n                        group_id: member.group_id,\r\n                        joined_at: member.joined_at,\r\n                        groups: {\r\n                            name: group.name,\r\n                            slug: group.slug\r\n                        }\r\n                    };\r\n                })\r\n                .filter((item): item is JoinedGroup => item !== null);\r\n\r\n            setGroups(joinedGroups);\r\n        } catch (error) {\r\n            console.error('Error fetching history:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (open) {\r\n            fetchGroups();\r\n        }\r\n    }, [open, user]);\r\n\r\n    const handleLeaveGroup = async () => {\r\n        if (!user || !confirmLeaveId) return;\r\n\r\n        setLeavingId(confirmLeaveId);\r\n        try {\r\n            const { error } = await supabase\r\n                .from('members')\r\n                .delete()\r\n                .eq('group_id', confirmLeaveId)\r\n                .eq('user_id', user.id);\r\n\r\n            if (error) throw error;\r\n\r\n            // Remove from list locally\r\n            setGroups(prev => prev.filter(g => g.group_id !== confirmLeaveId));\r\n        } catch (error) {\r\n            console.error('Error leaving group:', error);\r\n            alert(\"Erreur lors de la tentative de quitter le groupe.\");\r\n        } finally {\r\n            setLeavingId(null);\r\n            setConfirmLeaveId(null);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Dialog open={open} onOpenChange={onOpenChange}>\r\n                <DialogContent className=\"sm:max-w-[500px]\">\r\n                    <DialogHeader>\r\n                        <DialogTitle className=\"flex items-center gap-2 text-2xl\">\r\n                            <History className=\"w-6 h-6\" />\r\n                            Historique des groupes\r\n                        </DialogTitle>\r\n                        <DialogDescription>\r\n                            Retrouvez tous les groupes que vous avez rejoints.\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n\r\n                    <ScrollArea className=\"h-[300px] pr-4 mt-4\">\r\n                        {loading ? (\r\n                            <div className=\"flex justify-center items-center h-full min-h-[100px]\">\r\n                                <Loader2 className=\"w-8 h-8 animate-spin text-muted-foreground\" />\r\n                            </div>\r\n                        ) : groups.length === 0 ? (\r\n                            <div className=\"text-center text-muted-foreground py-8\">\r\n                                <p>Vous n'avez rejoint aucun groupe pour le moment.</p>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"space-y-3\">\r\n                                {groups.map((item) => (\r\n                                    <div\r\n                                        key={item.id}\r\n                                        className=\"flex items-center justify-between p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors group\"\r\n                                    >\r\n                                        <Link\r\n                                            href={`/group/${item.groups.slug}`}\r\n                                            className=\"flex-1 min-w-0 mr-4\"\r\n                                            onClick={() => onOpenChange(false)}\r\n                                        >\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <span className=\"font-medium truncate block\">\r\n                                                    {item.groups.name}\r\n                                                </span>\r\n                                                <ExternalLink className=\"w-3 h-3 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity\" />\r\n                                            </div>\r\n                                            <span className=\"text-xs text-muted-foreground\">\r\n                                                Rejoint le {new Date(item.joined_at).toLocaleDateString()}\r\n                                            </span>\r\n                                        </Link>\r\n\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            size=\"icon\"\r\n                                            className=\"text-muted-foreground hover:text-destructive hover:bg-destructive/10\"\r\n                                            onClick={() => setConfirmLeaveId(item.group_id)}\r\n                                            disabled={leavingId === item.group_id}\r\n                                        >\r\n                                            {leavingId === item.group_id ? (\r\n                                                <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                                            ) : (\r\n                                                <LogOut className=\"w-4 h-4\" />\r\n                                            )}\r\n                                        </Button>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </ScrollArea>\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n            <AlertDialog open={!!confirmLeaveId} onOpenChange={(open) => !open && setConfirmLeaveId(null)}>\r\n                <AlertDialogContent>\r\n                    <AlertDialogHeader>\r\n                        <AlertDialogTitle>Quitter ce groupe ?</AlertDialogTitle>\r\n                        <AlertDialogDescription>\r\n                            Vous ne ferez plus partie de ce groupe. Vous pourrez toujours le rejoindre plus tard si vous avez le lien.\r\n                        </AlertDialogDescription>\r\n                    </AlertDialogHeader>\r\n                    <AlertDialogFooter>\r\n                        <AlertDialogCancel>Annuler</AlertDialogCancel>\r\n                        <AlertDialogAction\r\n                            onClick={(e) => { e.preventDefault(); handleLeaveGroup(); }}\r\n                            className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n                        >\r\n                            Quitter\r\n                        </AlertDialogAction>\r\n                    </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n            </AlertDialog>\r\n        </>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\GroupSettingsModal.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchSettings'. Either include it or remove the dependency array.","line":31,"column":8,"nodeType":"ArrayExpression","endLine":31,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [isOpen, groupId, fetchSettings]","fix":{"range":[916,933],"text":"[isOpen, groupId, fetchSettings]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogDescription,\r\n} from '@/components/ui/dialog';\r\nimport { supabase } from '@/lib/supabase';\r\nimport { Loader2 } from 'lucide-react';\r\nimport { GroupTypeSelector } from '@/components/GroupTypeSelector';\r\n\r\ninterface GroupSettingsModalProps {\r\n    isOpen: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    groupId: string;\r\n}\r\n\r\nexport function GroupSettingsModal({ isOpen, onOpenChange, groupId }: GroupSettingsModalProps) {\r\n    const [groupType, setGroupType] = useState<'remote' | 'in_person'>('remote');\r\n    const [loading, setLoading] = useState(false);\r\n    const [saving, setSaving] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            fetchSettings();\r\n        }\r\n    }, [isOpen, groupId]);\r\n\r\n    const fetchSettings = async () => {\r\n        setLoading(true);\r\n        const { data } = await supabase.from('groups').select('type').eq('id', groupId).single();\r\n        if (data) {\r\n            setGroupType((data.type as 'remote' | 'in_person') || 'remote');\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    const handleSave = async () => {\r\n        setSaving(true);\r\n        try {\r\n            // Update group type. \r\n            // Note: We do NOT clear location data immediately here to be safe, \r\n            // but the UI will hide it if remote.\r\n            // However, the previous implementation DID clear location on save if remote. \r\n            // Let's stick to the prompt: just select type. \r\n            // If switching to remote, we might want to clear location to be clean, but let's just update type for now.\r\n\r\n            const { error } = await supabase\r\n                .from('groups')\r\n                .update({ type: groupType })\r\n                .eq('id', groupId);\r\n\r\n            if (error) throw error;\r\n            onOpenChange(false);\r\n        } catch (error) {\r\n            console.error(error);\r\n            alert(\"Erreur lors de l'enregistrement\");\r\n        } finally {\r\n            setSaving(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={isOpen} onOpenChange={onOpenChange}>\r\n            <DialogContent className=\"max-w-md\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Paramètres du groupe</DialogTitle>\r\n                    <DialogDescription>\r\n                        Choisissez le mode de fonctionnement du groupe.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                {loading ? (\r\n                    <div className=\"flex justify-center py-8\">\r\n                        <Loader2 className=\"w-8 h-8 animate-spin text-muted-foreground\" />\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"space-y-6 py-4\">\r\n                        <GroupTypeSelector value={groupType} onValueChange={(val) => setGroupType(val)} />\r\n\r\n                        <div className=\"flex justify-end pt-4\">\r\n                            <Button onClick={handleSave} disabled={saving}>\r\n                                {saving ? (\r\n                                    <>\r\n                                        <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                                        Enregistrement...\r\n                                    </>\r\n                                ) : (\r\n                                    \"Enregistrer\"\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\GroupTypeSelector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\Icons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\JoinModal.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'user'. Either include it or remove the dependency array.","line":57,"column":8,"nodeType":"ArrayExpression","endLine":57,"endColumn":40,"suggestions":[{"desc":"Update the dependencies array to be: [profile, onJoin, isAutoJoining, user]","fix":{"range":[2516,2548],"text":"[profile, onJoin, isAutoJoining, user]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Sparkles, User, ArrowLeft, Loader2 } from 'lucide-react';\r\nimport { VisuallyHidden } from '@radix-ui/react-visually-hidden';\r\nimport { useAuth } from '@/components/auth-provider';\r\nimport type { Member } from '@/types/database';\r\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\n\r\ninterface JoinModalProps {\r\n    onJoin: (name: string) => Promise<void>;\r\n    onReclaim?: (memberId: string, name: string) => void;\r\n    groupName?: string;\r\n    existingGuests?: Member[];\r\n}\r\n\r\nexport default function JoinModal({ onJoin, onReclaim, groupName, existingGuests = [] }: JoinModalProps) {\r\n    const [name, setName] = useState('');\r\n    const { profile, user } = useAuth();\r\n    const [isAutoJoining, setIsAutoJoining] = useState(false);\r\n    const [view, setView] = useState<'create' | 'reclaim'>('create');\r\n    const [selectedGuestId, setSelectedGuestId] = useState<string | null>(null);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (profile?.display_name && !isAutoJoining && !user) { // Only auto-fill if not logged in (handled by parent otherwise)\r\n            // Actually, parent handles auto-login for matched users. \r\n            // If we are here, it means we are either a guest or a new user.\r\n            // Let's just pre-fill if available but NOT auto-submit to give choice?\r\n            // The original logic auto-submitted. Let's keep it for now if it's a known profile.\r\n        }\r\n        if (profile?.display_name && !isAutoJoining) {\r\n            setName(profile.display_name);\r\n            // Auto-join if we have a name from the profile\r\n            const autoJoin = async () => {\r\n                setIsAutoJoining(true); // Keep this for the specific \"joining as...\" screen\r\n                try {\r\n                    await onJoin(profile.display_name!);\r\n                } catch (error) {\r\n                    console.error(\"Auto-join failed\", error);\r\n                    setIsAutoJoining(false); // Fallback to manual if failed\r\n                }\r\n            };\r\n            autoJoin();\r\n        }\r\n    }, [profile, onJoin, isAutoJoining]); // Be careful with deps here\r\n\r\n\r\n    if (isAutoJoining) {\r\n        return (\r\n            <Dialog open={true}>\r\n                <DialogContent>\r\n                    <VisuallyHidden>\r\n                        <DialogTitle>Rejoindre le groupe</DialogTitle>\r\n                    </VisuallyHidden>\r\n                    <div className=\"flex flex-col items-center justify-center p-6 space-y-4\">\r\n                        <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\r\n                        <p className=\"text-muted-foreground\">Rejoindre en tant que {profile?.display_name}...</p>\r\n                    </div>\r\n                </DialogContent>\r\n            </Dialog>\r\n        );\r\n    }\r\n\r\n    const handleSubmitCreate = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (name.trim()) {\r\n            setIsLoading(true);\r\n            try {\r\n                await onJoin(name.trim());\r\n            } catch (error) {\r\n                console.error(\"Join failed\", error);\r\n            } finally {\r\n                setIsLoading(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleReclaim = () => {\r\n        if (selectedGuestId && onReclaim) {\r\n            const guest = existingGuests.find(g => g.id === selectedGuestId);\r\n            if (guest) {\r\n                onReclaim(guest.id, guest.name);\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={true}>\r\n            <DialogContent className=\"sm:max-w-[425px]\">\r\n                {view === 'create' ? (\r\n                    <>\r\n                        <DialogHeader>\r\n                            <DialogTitle className=\"text-2xl\">Rejoindre le groupe {groupName}</DialogTitle>\r\n                            <DialogDescription className=\"text-base\">\r\n                                Entrez votre nom pour rejoindre la session.\r\n                            </DialogDescription>\r\n                        </DialogHeader>\r\n\r\n                        <form onSubmit={handleSubmitCreate} className=\"space-y-6 py-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"name\" className=\"text-muted-foreground font-medium\">Votre Nom</Label>\r\n                                <div className=\"relative\">\r\n                                    <Input\r\n                                        id=\"name\"\r\n                                        type=\"text\"\r\n                                        value={name}\r\n                                        onChange={(e) => setName(e.target.value)}\r\n                                        placeholder=\"Entrez votre nom...\"\r\n                                        autoFocus\r\n                                        maxLength={20}\r\n                                        required\r\n                                        className=\"h-11\"\r\n                                        disabled={isLoading}\r\n                                    />\r\n                                    {user && !name && (\r\n                                        <span className=\"absolute right-3 top-2.5 text-xs text-muted-foreground animate-pulse\">\r\n                                            Utilisation du profil...\r\n                                        </span>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-3\">\r\n                                <Button\r\n                                    type=\"submit\"\r\n                                    disabled={!name.trim() || isLoading}\r\n                                    className=\"w-full h-12 text-lg font-semibold bg-primary hover:bg-primary/90 text-primary-foreground shadow-lg shadow-primary/20 transition-all duration-300 hover:scale-[1.02]\"\r\n                                    size=\"lg\"\r\n                                >\r\n                                    {isLoading ? (\r\n                                        <>\r\n                                            <Loader2 className=\"w-5 h-5 mr-2 animate-spin\" />\r\n                                            Connexion...\r\n                                        </>\r\n                                    ) : (\r\n                                        <>\r\n                                            Rejoindre\r\n                                            <Sparkles className=\"w-5 h-5 ml-2\" />\r\n                                        </>\r\n                                    )}\r\n                                </Button>\r\n\r\n                                {existingGuests.length > 0 && (\r\n                                    <Button\r\n                                        type=\"button\"\r\n                                        variant=\"outline\"\r\n                                        className=\"w-full\"\r\n                                        onClick={() => setView('reclaim')}\r\n                                        disabled={isLoading}\r\n                                    >\r\n                                        Je fais déjà partie de ce groupe\r\n                                    </Button>\r\n                                )}\r\n                            </div>\r\n                        </form>\r\n                    </>\r\n                ) : (\r\n                    <>\r\n                        <DialogHeader>\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <Button\r\n                                    variant=\"ghost\"\r\n                                    size=\"icon\"\r\n                                    className=\"-ml-2 h-8 w-8\"\r\n                                    onClick={() => setView('create')}\r\n                                >\r\n                                    <ArrowLeft className=\"w-4 h-4\" />\r\n                                </Button>\r\n                                <DialogTitle className=\"text-xl\">Qui êtes-vous ?</DialogTitle>\r\n                            </div>\r\n                            <DialogDescription>\r\n                                Sélectionnez votre profil existant dans la liste.\r\n                            </DialogDescription>\r\n                        </DialogHeader>\r\n\r\n                        <div className=\"py-4 space-y-4\">\r\n                            <ScrollArea className=\"h-[200px] rounded-md border p-4\">\r\n                                <RadioGroup value={selectedGuestId || \"\"} onValueChange={setSelectedGuestId}>\r\n                                    {existingGuests.map((guest) => (\r\n                                        <div key={guest.id} className=\"flex items-center space-x-2 py-2\">\r\n                                            <RadioGroupItem value={guest.id} id={guest.id} />\r\n                                            <Label htmlFor={guest.id} className=\"flex items-center gap-2 cursor-pointer w-full\">\r\n                                                <User className=\"w-4 h-4 text-muted-foreground\" />\r\n                                                <span className=\"font-medium\">{guest.name}</span>\r\n                                            </Label>\r\n                                        </div>\r\n                                    ))}\r\n                                </RadioGroup>\r\n                            </ScrollArea>\r\n\r\n                            <Button\r\n                                type=\"button\"\r\n                                disabled={!selectedGuestId}\r\n                                onClick={handleReclaim}\r\n                                className=\"w-full h-12 text-lg font-semibold\"\r\n                            >\r\n                                Valider et Rejoindre\r\n                            </Button>\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </DialogContent>\r\n        </Dialog >\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\LocationCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardHeader' is defined but never used.","line":2,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":39,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CardHeader"},"fix":{"range":[72,84],"text":""},"desc":"Remove unused variable \"CardHeader\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowLeft' is defined but never used.","line":4,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":53,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ArrowLeft"},"fix":{"range":[219,230],"text":""},"desc":"Remove unused variable \"ArrowLeft\"."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchVotes'. Either include it or remove the dependency array.","line":51,"column":8,"nodeType":"ArrayExpression","endLine":51,"endColumn":28,"suggestions":[{"desc":"Update the dependencies array to be: [fetchVotes, group.id, memberId]","fix":{"range":[1944,1964],"text":"[fetchVotes, group.id, memberId]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'nextVote' is assigned a value but never used.","line":94,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":94,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":94,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3323,3326],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3323,3326],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":294,"column":95,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":294,"endColumn":98,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14600,14603],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14600,14603],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":173,"column":37,"nodeType":"JSXOpeningElement","endLine":178,"endColumn":39,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":2,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from \"react\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { ArrowBigUp, ArrowBigDown, Target, ArrowLeft, Pencil, ChevronDown, ChevronUp } from \"lucide-react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport type { Group } from \"@/types/database\";\r\nimport { EditLocationModal } from \"./EditLocationModal\";\r\n\r\ninterface LocationCardProps {\r\n    group: Group;\r\n    memberId: string | null;\r\n    isAdmin: boolean;\r\n    currentMemberName: string | null;\r\n    onLocationUpdate: (location: { name?: string; address?: string; link?: string; image?: string;[key: string]: string | undefined }) => void;\r\n}\r\n\r\nexport function LocationCard({ group, memberId, isAdmin, currentMemberName, onLocationUpdate }: LocationCardProps) {\r\n    const [score, setScore] = useState(0);\r\n    const [userVote, setUserVote] = useState<number>(0); // 0, 1, or -1\r\n    const [loading, setLoading] = useState(false);\r\n    const [editMode, setEditMode] = useState<'edit' | 'counter' | null>(null);\r\n    const [isCollapsed, setIsCollapsed] = useState(false);\r\n\r\n    const hasLocation = !!(group.location as { name?: string })?.name;\r\n\r\n    useEffect(() => {\r\n        if (!group.id) return;\r\n        fetchVotes();\r\n\r\n        // Subscribe to vote changes\r\n        const channel = supabase\r\n            .channel(`votes:${group.id}`)\r\n            .on(\r\n                'postgres_changes',\r\n                {\r\n                    event: '*',\r\n                    schema: 'public',\r\n                    table: 'location_votes',\r\n                    filter: `group_id=eq.${group.id}`,\r\n                },\r\n                () => {\r\n                    fetchVotes();\r\n                }\r\n            )\r\n            .subscribe();\r\n\r\n        return () => {\r\n            supabase.removeChannel(channel);\r\n        };\r\n    }, [group.id, memberId]); // Re-fetch if memberId changes (e.g. join/leave)\r\n\r\n    const fetchVotes = async () => {\r\n        // 1. Get total score\r\n        const { data: allVotes } = await supabase\r\n            .from('location_votes')\r\n            .select('vote')\r\n            .eq('group_id', group.id);\r\n\r\n        if (allVotes) {\r\n            const total = allVotes.reduce((acc, curr) => acc + curr.vote, 0);\r\n            setScore(total);\r\n        }\r\n\r\n        // 2. Get user's vote if memberId is present\r\n        if (memberId) {\r\n            const { data: myVote } = await supabase\r\n                .from('location_votes')\r\n                .select('vote')\r\n                .eq('group_id', group.id)\r\n                .eq('member_id', memberId)\r\n                .single();\r\n\r\n            if (myVote) {\r\n                setUserVote(myVote.vote);\r\n            } else {\r\n                setUserVote(0);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleVote = async (newVote: 1 | -1, e: React.MouseEvent) => {\r\n        e.stopPropagation(); // Prevent card collapse when clicking vote\r\n        if (!memberId) return;\r\n        setLoading(true);\r\n\r\n        // Optimistic update\r\n        const previousVote = userVote;\r\n        const previousScore = score;\r\n\r\n        let nextVote = newVote;\r\n        if (userVote === newVote) {\r\n            // Toggle off\r\n            nextVote = 0 as any; // logic helper\r\n            setUserVote(0);\r\n            setScore(prev => prev - newVote);\r\n        } else {\r\n            // Change vote\r\n            setUserVote(newVote);\r\n            setScore(prev => prev - userVote + newVote);\r\n        }\r\n\r\n        try {\r\n            if (previousVote === newVote) {\r\n                // Delete vote\r\n                await supabase\r\n                    .from('location_votes')\r\n                    .delete()\r\n                    .eq('group_id', group.id)\r\n                    .eq('member_id', memberId);\r\n            } else {\r\n                // Upsert vote\r\n                await supabase\r\n                    .from('location_votes')\r\n                    .upsert({\r\n                        group_id: group.id,\r\n                        member_id: memberId,\r\n                        vote: newVote\r\n                    });\r\n            }\r\n        } catch (error) {\r\n            // Revert on error\r\n            console.error(\"Vote failed\", error);\r\n            setUserVote(previousVote);\r\n            setScore(previousScore);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Card className=\"border-primary/20 bg-primary/5\">\r\n                <div\r\n                    className=\"flex items-center justify-between p-3 cursor-pointer hover:bg-primary/5 transition-colors\"\r\n                    onClick={() => setIsCollapsed(!isCollapsed)}\r\n                >\r\n                    <div className=\"flex items-center gap-2 overflow-hidden flex-1 min-w-0 mr-2\">\r\n                        <CardTitle className=\"text-sm font-bold shrink-0 flex items-center gap-1\">\r\n                            Lieu {score > 0 ? \"🔥\" : score < 0 ? \"💩\" : \"\"}\r\n                        </CardTitle>\r\n                        {hasLocation && (\r\n                            <>\r\n                                <span className=\"text-muted-foreground shrink-0\">|</span>\r\n                                <span className=\"text-sm font-medium truncate\">{group.location?.name}</span>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"flex items-center gap-3 shrink-0\">\r\n                        {hasLocation && score !== 0 && (\r\n                            <span className={cn(\"text-xs font-bold\", score > 0 ? \"text-orange-600\" : \"text-amber-900\")}>\r\n                                {score > 0 ? `+${score}` : score}\r\n                            </span>\r\n                        )}\r\n                        {isCollapsed ? <ChevronDown className=\"h-4 w-4 text-muted-foreground\" /> : <ChevronUp className=\"h-4 w-4 text-muted-foreground\" />}\r\n                    </div>\r\n                </div>\r\n\r\n                {!isCollapsed && (\r\n                    <CardContent className=\"p-3 pt-0 animate-in fade-in slide-in-from-top-1 duration-200\">\r\n                        {/* Main Location Content - Unified Layout */}\r\n                        <div className=\"flex gap-3 border rounded-lg bg-card/50 overflow-hidden shadow-sm hover:shadow-md transition-shadow cursor-default\" onClick={(e) => {\r\n                            // If there is a link, open it? Or just let the link inside handle it?\r\n                            // Let's make the whole card clickable if there is a link, except for buttons\r\n                            if (group.location?.link && !(e.target as HTMLElement).closest('button')) {\r\n                                window.open(group.location.link, '_blank');\r\n                            }\r\n                        }}>\r\n                            {/* Left: Image or Icon */}\r\n                            <div className=\"w-24 bg-muted shrink-0 flex items-center justify-center relative border-r\">\r\n                                {group.location?.image ? (\r\n                                    // eslint-disable-next-line @next/next/no-img-element\r\n                                    <img\r\n                                        src={group.location.image}\r\n                                        alt=\"Location preview\"\r\n                                        className=\"w-full h-full object-cover absolute inset-0\"\r\n                                        referrerPolicy=\"no-referrer\"\r\n                                    />\r\n                                ) : (\r\n                                    <Target className=\"w-8 h-8 text-muted-foreground/30\" />\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Middle: Info */}\r\n                            <div className=\"flex-1 py-2 min-w-0 flex flex-col justify-center gap-1\">\r\n                                {hasLocation ? (\r\n                                    <>\r\n                                        <div className=\"font-semibold text-sm line-clamp-1 leading-tight\">\r\n                                            {group.location?.preview_title || group.location?.name || \"Lieu inconnu\"}\r\n                                        </div>\r\n                                        {(group.location?.description || group.location?.address) ? (\r\n                                            <div className=\"text-xs text-muted-foreground line-clamp-2 leading-tight\">\r\n                                                {group.location?.description || group.location?.address}\r\n                                            </div>\r\n                                        ) : (\r\n                                            <div className=\"text-xs text-muted-foreground italic\">Aucune description disponible</div>\r\n                                        )}\r\n\r\n                                        {/* Proposed By Footer */}\r\n                                        {group.location?.proposed_by && (\r\n                                            <div className=\"text-[10px] text-muted-foreground italic mt-1\">\r\n                                                Proposé par {group.location.proposed_by}\r\n                                            </div>\r\n                                        )}\r\n                                    </>\r\n                                ) : (\r\n                                    <div className=\"text-muted-foreground italic text-xs\">\r\n                                        {isAdmin ? \"Aucun lieu défini. Proposez-en un !\" : \"Le lieu n'a pas encore été défini par l'administrateur.\"}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Right: Voting & Actions */}\r\n                            <div className=\"flex flex-col items-center justify-center border-l bg-muted/20 px-1 py-1 gap-1 shrink-0\" onClick={(e) => e.stopPropagation()}>\r\n                                {hasLocation && (\r\n                                    <>\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            size=\"icon\"\r\n                                            className={cn(\r\n                                                \"h-7 w-7 hover:bg-orange-100 hover:text-orange-600 transition-all rounded-full\",\r\n                                                userVote === 1 && \"bg-orange-100 text-orange-600\"\r\n                                            )}\r\n                                            onClick={(e) => handleVote(1, e)}\r\n                                            disabled={loading}\r\n                                        >\r\n                                            <ArrowBigUp className={cn(\"h-5 w-5\", userVote === 1 && \"fill-current\")} />\r\n                                        </Button>\r\n\r\n                                        <span className={cn(\"text-xs font-bold w-full text-center py-0.5\",\r\n                                            score > 0 ? \"text-orange-600\" : score < 0 ? \"text-blue-600\" : \"text-muted-foreground\"\r\n                                        )}>\r\n                                            {score}\r\n                                        </span>\r\n\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            size=\"icon\"\r\n                                            className={cn(\r\n                                                \"h-7 w-7 hover:bg-blue-100 hover:text-blue-600 transition-all rounded-full\",\r\n                                                userVote === -1 && \"bg-blue-100 text-blue-600\"\r\n                                            )}\r\n                                            onClick={(e) => handleVote(-1, e)}\r\n                                            disabled={loading}\r\n                                        >\r\n                                            <ArrowBigDown className={cn(\"h-5 w-5\", userVote === -1 && \"fill-current\")} />\r\n                                        </Button>\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Bottom Actions: Edit / Counter-Proposal */}\r\n                        <div className=\"flex items-center justify-end gap-2 mt-2\">\r\n                            {isAdmin && (\r\n                                <Button\r\n                                    variant=\"ghost\"\r\n                                    size=\"sm\"\r\n                                    className=\"h-6 text-xs text-muted-foreground hover:text-primary px-2\"\r\n                                    onClick={(e) => {\r\n                                        e.stopPropagation();\r\n                                        setEditMode('edit');\r\n                                    }}\r\n                                >\r\n                                    <Pencil className=\"h-3 w-3 mr-1\" />\r\n                                    Modifier\r\n                                </Button>\r\n                            )}\r\n\r\n                            {/* Counter Proposal - Only show if score < 0 or if explicitly requested (but sticking to score < 0 rule for now) */}\r\n                            {hasLocation && score < 0 && (\r\n                                <Button\r\n                                    variant=\"link\"\r\n                                    size=\"sm\"\r\n                                    className=\"h-6 text-xs text-destructive hover:text-destructive/80 px-2\"\r\n                                    onClick={(e) => {\r\n                                        e.stopPropagation();\r\n                                        setEditMode('counter');\r\n                                    }}\r\n                                >\r\n                                    <Target className=\"h-3 w-3 mr-1\" />\r\n                                    Faire une contre-proposition\r\n                                </Button>\r\n                            )}\r\n                        </div>\r\n                    </CardContent>\r\n                )}\r\n            </Card>\r\n\r\n            <EditLocationModal\r\n                isOpen={!!editMode}\r\n                onOpenChange={(open) => !open && setEditMode(null)}\r\n                groupId={group.id}\r\n                existingLocation={editMode === 'edit' && group.location && (group.location as any).name ? (group.location as { name: string; address?: string; link?: string; image?: string }) : null}\r\n                currentMemberName={currentMemberName}\r\n                currentMemberId={memberId}\r\n                onLocationUpdate={onLocationUpdate}\r\n            />\r\n        </>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\ManageGroupModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'groupId' is defined but never used.","line":27,"column":58,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":65}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogDescription,\r\n} from '@/components/ui/dialog';\r\nimport { supabase } from '@/lib/supabase';\r\nimport { Loader2, Trash2, ShieldAlert } from 'lucide-react';\r\nimport { Member } from '@/types/database';\r\nimport { Badge } from '@/components/ui/badge';\r\n\r\ninterface ManageGroupModalProps {\r\n    isOpen: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    groupId: string;\r\n    members: Member[];\r\n    loading?: boolean;\r\n    onRefresh?: () => Promise<void>;\r\n    currentMemberId: string | null;\r\n}\r\n\r\nexport function ManageGroupModal({ isOpen, onOpenChange, groupId, members, loading, onRefresh, currentMemberId }: ManageGroupModalProps) {\r\n    const [deletingId, setDeletingId] = useState<string | null>(null);\r\n\r\n    const handleDeleteMember = async (memberId: string) => {\r\n        if (!confirm(\"Voulez-vous vraiment supprimer ce membre du groupe ?\")) return;\r\n\r\n        setDeletingId(memberId);\r\n        try {\r\n            const { error } = await supabase\r\n                .from('members')\r\n                .delete()\r\n                .eq('id', memberId);\r\n\r\n            if (error) throw error;\r\n            if (onRefresh) await onRefresh();\r\n        } catch (error) {\r\n            console.error('Error deleting member:', error);\r\n            alert(\"Erreur lors de la suppression.\");\r\n        } finally {\r\n            setDeletingId(null);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={isOpen} onOpenChange={onOpenChange}>\r\n            <DialogContent className=\"max-w-md sm:max-w-lg h-[80vh] flex flex-col p-0\">\r\n                <DialogHeader className=\"p-6 pb-2\">\r\n                    <DialogTitle>Gérer les membres</DialogTitle>\r\n                    <DialogDescription>\r\n                        Liste des membres du groupe.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <div className=\"flex-1 overflow-hidden p-6 pt-4\">\r\n                    <div className=\"space-y-4 h-full overflow-y-auto pr-2\">\r\n                        {loading && members.length === 0 ? (\r\n                            <div className=\"flex justify-center py-4\">\r\n                                <Loader2 className=\"w-6 h-6 animate-spin text-muted-foreground\" />\r\n                            </div>\r\n                        ) : members.length === 0 ? (\r\n                            <p className=\"text-center text-muted-foreground py-4\">Aucun membre trouvé.</p>\r\n                        ) : (\r\n                            members.map((member) => (\r\n                                <div key={member.id} className=\"flex items-center justify-between p-3 rounded-lg border bg-card/50\">\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className=\"w-8 h-8 rounded-full bg-secondary flex items-center justify-center text-xs font-bold\">\r\n                                            {member.name.substring(0, 2).toUpperCase()}\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"font-medium text-sm flex items-center gap-2\">\r\n                                                {member.name}\r\n                                                {member.id === currentMemberId && <Badge variant=\"secondary\" className=\"text-[10px] h-4\">Vous</Badge>}\r\n                                                {member.role === 'admin' && <Badge variant=\"outline\" className=\"text-[10px] h-4 border-primary text-primary\">Admin</Badge>}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {member.id !== currentMemberId ? (\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            size=\"icon\"\r\n                                            className=\"h-8 w-8 text-destructive hover:text-destructive hover:bg-destructive/10\"\r\n                                            onClick={() => handleDeleteMember(member.id)}\r\n                                            disabled={deletingId === member.id}\r\n                                        >\r\n                                            {deletingId === member.id ? (\r\n                                                <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                                            ) : (\r\n                                                <Trash2 className=\"w-4 h-4\" />\r\n                                            )}\r\n                                        </Button>\r\n                                    ) : (\r\n                                        <ShieldAlert className=\"w-4 h-4 text-muted-foreground/30\" />\r\n                                    )}\r\n                                </div>\r\n                            ))\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\MemberList.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":19,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useEffect"},"fix":{"range":[26,36],"text":""},"desc":"Remove unused variable \"useEffect\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used.","line":3,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":29,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"useState"},"fix":{"range":[17,61],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport type { Member } from '@/types/database';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Users as UsersIcon, Loader2 } from 'lucide-react';\r\n\r\nimport { cn } from '@/lib/utils';\r\nimport { MemberStatus } from './MemberStatus';\r\n\r\ninterface MemberListProps {\r\n    loading?: boolean;\r\n    currentMemberId?: string | null;\r\n    members: Member[];\r\n}\r\n\r\nexport default function MemberList({ loading, currentMemberId, members }: MemberListProps) {\r\n\r\n    const getInitials = (name: string) => {\r\n        return name\r\n            .split(' ')\r\n            .map((n) => n[0])\r\n            .join('')\r\n            .toUpperCase()\r\n            .slice(0, 2);\r\n    };\r\n\r\n    if (loading && members.length === 0) {\r\n        return (\r\n            <div className=\"flex justify-center py-12\">\r\n                <Loader2 className=\"w-8 h-8 animate-spin text-muted-foreground\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (members.length === 0) {\r\n        return (\r\n            <div className=\"flex flex-col items-center justify-center py-12 text-muted-foreground\">\r\n                <UsersIcon className=\"w-12 h-12 mb-3 opacity-50\" />\r\n                <p className=\"text-sm\">No members yet</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-3\">\r\n            {members.map((member) => {\r\n                const isCurrentUser = member.id === currentMemberId;\r\n\r\n                return (\r\n                    <div\r\n                        key={member.id}\r\n                        className={cn(\r\n                            \"flex items-center gap-4 p-4 rounded-xl border bg-card/50 backdrop-blur-sm hover:bg-accent/50 transition-all duration-300 animate-slide-up\",\r\n                            member.role === 'admin' && \"border-primary/50 shadow-[0_0_15px_-5px_hsl(var(--primary)/0.3)]\"\r\n                        )}\r\n                        role=\"listitem\"\r\n                    >\r\n                        {/* Avatar */}\r\n                        <div\r\n                            className={cn(\r\n                                \"w-12 h-12 rounded-full flex items-center justify-center text-base font-bold shadow-sm transition-colors\",\r\n                                member.is_ready\r\n                                    ? 'bg-primary text-primary-foreground shadow-[0_0_15px_-3px_hsl(var(--primary)/0.4)]'\r\n                                    : 'bg-secondary text-secondary-foreground',\r\n                                member.role === 'admin' && !member.is_ready && \"ring-2 ring-primary/30\"\r\n                            )}\r\n                        >\r\n                            {getInitials(member.name)}\r\n                        </div>\r\n\r\n                        {/* Name */}\r\n                        <div className=\"flex-1 min-w-0\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <p className=\"font-semibold text-lg truncate\">\r\n                                    {member.name}\r\n                                </p>\r\n                                {isCurrentUser && (\r\n                                    <Badge variant=\"secondary\" className=\"text-xs font-normal\">\r\n                                        Vous\r\n                                    </Badge>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Status Badge */}\r\n                        <div className=\"text-right\">\r\n                            <MemberStatus member={member} />\r\n                        </div>\r\n                    </div>\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\MemberStatus.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\NotificationManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\ProgressCounter.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PartyPopper' is defined but never used.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":21,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"PartyPopper"},"fix":{"range":[71,114],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { Progress } from '@/components/ui/progress';\r\nimport { PartyPopper } from 'lucide-react';\r\n\r\ninterface ProgressCounterProps {\r\n    readyCount: number;\r\n    totalCount: number;\r\n}\r\n\r\nexport default function ProgressCounter({ readyCount, totalCount }: ProgressCounterProps) {\r\n    const percentage = Math.round((readyCount / totalCount) * 100) || 0;\r\n    const isComplete = percentage === 100;\r\n\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            <div className=\"flex justify-between text-sm font-medium\">\r\n                <span className={isComplete ? \"text-primary font-bold\" : \"text-muted-foreground\"}>\r\n                    {isComplete ? \"Tout le monde est prêt !\" : \"En attente...\"}\r\n                </span>\r\n                <span className=\"text-muted-foreground\">\r\n                    {readyCount}/{totalCount} prêts\r\n                </span>\r\n            </div>\r\n\r\n            {/* Progress Bar */}\r\n            <Progress\r\n                value={percentage}\r\n                className=\"h-2\"\r\n                aria-label=\"Progression du groupe\"\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\ReadyButton.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Loader2' is defined but never used.","line":5,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":31,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Loader2"},"fix":{"range":[147,156],"text":""},"desc":"Remove unused variable \"Loader2\"."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\ReadyButton.tsx:26:13\n  24 |     useEffect(() => {\n  25 |         if (!timerEndTime || optimisticIsReady) {\n> 26 |             setTimeLeft(null);\n     |             ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  27 |             setIsSoonReady(false);\n  28 |             return;\n  29 |         }","line":26,"column":13,"nodeType":null,"endLine":26,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { Button } from '@/components/ui/button';\r\nimport { toggleReadyAction } from '@/app/actions/member';\r\nimport { Check, Clock, Loader2, Timer, AlertTriangle } from 'lucide-react';\r\nimport { useEffect, useState, useOptimistic, startTransition } from 'react';\r\n\r\ninterface ReadyButtonProps {\r\n    slug: string; // Need slug for the secure cookie verification\r\n    memberId: string;\r\n    isReady: boolean;\r\n    timerEndTime?: string | null;\r\n}\r\n\r\nexport default function ReadyButton({ slug, memberId, isReady, timerEndTime }: ReadyButtonProps) {\r\n    const [timeLeft, setTimeLeft] = useState<string | null>(null);\r\n    const [isSoonReady, setIsSoonReady] = useState(false);\r\n\r\n    const [optimisticIsReady, addOptimisticIsReady] = useOptimistic<boolean, boolean>(\r\n        isReady,\r\n        (state, newState) => newState\r\n    );\r\n\r\n    useEffect(() => {\r\n        if (!timerEndTime || optimisticIsReady) {\r\n            setTimeLeft(null);\r\n            setIsSoonReady(false);\r\n            return;\r\n        }\r\n\r\n        const tick = () => {\r\n            const now = new Date();\r\n            const end = new Date(timerEndTime);\r\n            const diff = end.getTime() - now.getTime();\r\n\r\n            if (diff <= 0) {\r\n                setTimeLeft(null);\r\n                setIsSoonReady(true);\r\n            } else {\r\n                const minutes = Math.floor(diff / 60000);\r\n                const seconds = Math.floor((diff % 60000) / 1000);\r\n                setTimeLeft(`${minutes}:${seconds.toString().padStart(2, '0')}`);\r\n                setIsSoonReady(false);\r\n            }\r\n        };\r\n\r\n        tick();\r\n        const interval = setInterval(tick, 1000);\r\n        return () => clearInterval(interval);\r\n    }, [timerEndTime, optimisticIsReady]);\r\n\r\n    const toggleReady = async () => {\r\n        const nextState = !optimisticIsReady;\r\n\r\n        // Haptic feedback\r\n        if (typeof window !== 'undefined' && navigator.vibrate) {\r\n            if (nextState) {\r\n                // Confident single vibration when becoming ready\r\n                navigator.vibrate(50);\r\n            } else {\r\n                // Double light vibration when canceling\r\n                navigator.vibrate([30, 50, 30]);\r\n            }\r\n        }\r\n\r\n        startTransition(() => {\r\n            addOptimisticIsReady(nextState);\r\n        });\r\n\r\n        try {\r\n            const result = await toggleReadyAction(slug, memberId, nextState);\r\n            if (!result.success) {\r\n                console.error(\"Action failed:\", result.error);\r\n                // Optionally revert the optimistic update here if needed\r\n                // startTransition(() => addOptimisticIsReady(!nextState)); \r\n            }\r\n        } catch (error) {\r\n            console.error('Error updating status context:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Button\r\n            onClick={toggleReady}\r\n            variant={optimisticIsReady ? \"default\" : \"outline\"}\r\n            size=\"lg\"\r\n            className={`\r\n                w-full h-24 text-xl font-bold tracking-wide transition-all duration-500\r\n                ${optimisticIsReady\r\n                    ? 'bg-primary hover:bg-primary/90 shadow-[0_0_30px_-5px_hsl(var(--primary)/0.6)] scale-[1.02] border-primary'\r\n                    : isSoonReady || timeLeft\r\n                        ? 'bg-amber-500/10 hover:bg-amber-500/20 border-amber-500/50 text-amber-500'\r\n                        : 'bg-background hover:bg-accent hover:text-accent-foreground border-2'\r\n                }\r\n            `}\r\n            aria-label={optimisticIsReady ? \"Marquer comme pas prêt\" : \"Marquer comme prêt\"}\r\n            aria-pressed={optimisticIsReady}\r\n        >\r\n            {optimisticIsReady ? (\r\n                <div className=\"flex items-center gap-3 animate-slide-up\">\r\n                    <div className=\"p-1 rounded-full bg-primary-foreground/20\">\r\n                        <Check className=\"w-6 h-6\" />\r\n                    </div>\r\n                    JE SUIS PRÊT !\r\n                </div>\r\n            ) : isSoonReady ? (\r\n                <div className=\"flex items-center gap-3 text-amber-500 animate-pulse\">\r\n                    <AlertTriangle className=\"w-6 h-6\" />\r\n                    <span>BIENTÔT PRÊT - CLIQUEZ POUR VALIDER</span>\r\n                </div>\r\n            ) : timeLeft ? (\r\n                <div className=\"flex items-center gap-3 text-amber-500\">\r\n                    <Timer className=\"w-6 h-6 animate-pulse\" />\r\n                    <span className=\"tabular-nums\">PRÊT DANS {timeLeft}</span>\r\n                </div>\r\n            ) : (\r\n                <div className=\"flex items-center gap-3 text-muted-foreground group\">\r\n                    <Clock className=\"w-6 h-6 group-hover:text-foreground transition-colors\" />\r\n                    <span>PAS PRÊT</span>\r\n                </div>\r\n            )}\r\n        </Button >\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\ShareMenu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\TimeProposalModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\TimerPicker.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isReady' is defined but never used.","line":17,"column":58,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":65}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\r\nimport { Slider } from '@/components/ui/slider';\r\nimport { Timer, Clock } from 'lucide-react';\r\nimport { supabase } from '@/lib/supabase';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface TimerPickerProps {\r\n    memberId: string;\r\n    currentTimerEnd: string | null;\r\n    isReady: boolean;\r\n}\r\n\r\nexport function TimerPicker({ memberId, currentTimerEnd, isReady }: TimerPickerProps) {\r\n    const [open, setOpen] = useState(false);\r\n    const [minutes, setMinutes] = useState(5);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleSetTimer = async () => {\r\n        setLoading(true);\r\n        const endTime = new Date();\r\n        endTime.setMinutes(endTime.getMinutes() + minutes);\r\n\r\n        try {\r\n            await supabase\r\n                .from('members')\r\n                .update({\r\n                    timer_end_time: endTime.toISOString(),\r\n                    is_ready: false // Ensure not ready when timer starts\r\n                })\r\n                .eq('id', memberId);\r\n            setOpen(false);\r\n        } catch (error) {\r\n            console.error('Error setting timer:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleCancelTimer = async () => {\r\n        setLoading(true);\r\n        try {\r\n            await supabase\r\n                .from('members')\r\n                .update({ timer_end_time: null })\r\n                .eq('id', memberId);\r\n            setOpen(false);\r\n        } catch (error) {\r\n            console.error('Error cancelling timer:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const isActive = !!currentTimerEnd && new Date(currentTimerEnd) > new Date();\r\n\r\n    return (\r\n        <Popover open={open} onOpenChange={setOpen}>\r\n            <PopoverTrigger asChild>\r\n                <Button\r\n                    variant={isActive ? \"secondary\" : \"outline\"}\r\n                    className={cn(\r\n                        \"h-12 w-full px-4 border-2 transition-all duration-300 flex flex-row items-center justify-center gap-2\",\r\n                        isActive && \"border-amber-500 text-amber-500 animate-pulse bg-amber-500/10\"\r\n                    )}\r\n                >\r\n                    <Timer className={cn(\"w-6 h-6\", isActive && \"animate-pulse\")} />\r\n                    <span className=\"font-semibold\">Bientôt prêt ?</span>\r\n                </Button>\r\n            </PopoverTrigger>\r\n            <PopoverContent className=\"w-80 p-4\" align=\"center\">\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"flex flex-col gap-2\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <h4 className=\"font-medium leading-none flex items-center gap-2\">\r\n                                <Clock className=\"w-4 h-4\" />\r\n                                Minuteur\r\n                            </h4>\r\n                            <span className=\"text-sm text-muted-foreground\">{minutes} min</span>\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                            Indiquez aux autres participants dans combien de temps vous serez prêt.\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div className=\"py-2\">\r\n                        <Slider\r\n                            defaultValue={[5]}\r\n                            max={60}\r\n                            min={1}\r\n                            step={1}\r\n                            value={[minutes]}\r\n                            onValueChange={(vals) => setMinutes(vals[0])}\r\n                            className=\"[&_[role=slider]]:h-4 [&_[role=slider]]:w-4\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"flex gap-2\">\r\n                        <Button\r\n                            className=\"flex-1\"\r\n                            onClick={handleSetTimer}\r\n                            disabled={loading}\r\n                        >\r\n                            Lancer\r\n                        </Button>\r\n                        {isActive && (\r\n                            <Button\r\n                                variant=\"destructive\"\r\n                                size=\"icon\"\r\n                                onClick={handleCancelTimer}\r\n                                disabled={loading}\r\n                            >\r\n                                <span className=\"sr-only\">Annuler</span>\r\n                                ×\r\n                            </Button>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </PopoverContent>\r\n        </Popover>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\__tests__\\ProgressCounter.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\auth-button.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'view' is assigned a value but never used.","line":25,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":34},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\auth-button.tsx:35:13\n  33 |     useEffect(() => {\n  34 |         if (profile?.is_inferred) {\n> 35 |             setShowProfileModal(true);\n     |             ^^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  36 |         }\n  37 |     }, [profile]);\n  38 |","line":35,"column":13,"nodeType":null,"endLine":35,"endColumn":32}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useAuth } from \"@/components/auth-provider\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n    DropdownMenu,\r\n    DropdownMenuContent,\r\n    DropdownMenuItem,\r\n    DropdownMenuLabel,\r\n    DropdownMenuSeparator,\r\n    DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { LogOut, Loader2, User as UserIcon, UserPen, History } from \"lucide-react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { AuthModal } from \"./auth-modal\";\r\nimport { ProfileModal } from \"./profile-modal\";\r\nimport { GroupHistoryModal } from \"./GroupHistoryModal\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\ninterface AuthButtonProps {\r\n    view?: 'default' | 'icon';\r\n    className?: string;\r\n}\r\n\r\nexport function AuthButton({ view = 'default', className }: AuthButtonProps) {\r\n    const { user, profile, loading } = useAuth();\r\n    const router = useRouter();\r\n    const [open, setOpen] = useState(false);\r\n    const [showProfileModal, setShowProfileModal] = useState(false);\r\n    const [showHistory, setShowHistory] = useState(false);\r\n\r\n    // Auto-open profile modal if profile is inferred (not saved in DB)\r\n    useEffect(() => {\r\n        if (profile?.is_inferred) {\r\n            setShowProfileModal(true);\r\n        }\r\n    }, [profile]);\r\n\r\n    const handleSignOut = async () => {\r\n        await supabase.auth.signOut();\r\n        router.refresh();\r\n    };\r\n\r\n    if (loading) {\r\n        return <Button variant=\"ghost\" size=\"icon\" disabled><Loader2 className=\"w-4 h-4 animate-spin\" /></Button>;\r\n    }\r\n\r\n    if (!user) {\r\n        // Always show connection button if not logged in\r\n        return (\r\n            <AuthModal\r\n                open={open}\r\n                onOpenChange={setOpen}\r\n                trigger={\r\n                    <Button variant=\"outline\" className={className}>\r\n                        Connexion\r\n                    </Button>\r\n                }\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <ProfileModal open={showProfileModal} onOpenChange={setShowProfileModal} />\r\n            <GroupHistoryModal open={showHistory} onOpenChange={setShowHistory} />\r\n            <DropdownMenu>\r\n                <DropdownMenuTrigger asChild>\r\n                    <Button variant=\"ghost\" className={`relative h-9 w-9 rounded-full ${className}`}>\r\n                        <Avatar className=\"h-9 w-9 border border-border/50\">\r\n                            <AvatarImage src={profile?.avatar_url || \"\"} alt={profile?.display_name || \"User\"} />\r\n                            <AvatarFallback>{profile?.display_name?.slice(0, 2).toUpperCase() || <UserIcon className=\"w-4 h-4\" />}</AvatarFallback>\r\n                        </Avatar>\r\n                    </Button>\r\n                </DropdownMenuTrigger>\r\n                <DropdownMenuContent className=\"w-56\" align=\"end\" forceMount>\r\n                    <DropdownMenuLabel className=\"font-normal\">\r\n                        <div className=\"flex flex-col space-y-1\">\r\n                            <p className=\"text-sm font-medium leading-none\">Bonjour {profile?.display_name?.split(' ')[0] || \"!\"}</p>\r\n                            <p className=\"text-xs leading-none text-muted-foreground\">\r\n                                {user.email}\r\n                            </p>\r\n                        </div>\r\n                    </DropdownMenuLabel>\r\n                    <DropdownMenuSeparator />\r\n                    <DropdownMenuItem onClick={() => setShowProfileModal(true)} className=\"cursor-pointer\">\r\n                        <UserPen className=\"mr-2 h-4 w-4\" />\r\n                        <span>Modifier mon profil</span>\r\n                    </DropdownMenuItem>\r\n                    <DropdownMenuItem onClick={() => setShowHistory(true)} className=\"cursor-pointer\">\r\n                        <History className=\"mr-2 h-4 w-4\" />\r\n                        <span>Historique</span>\r\n                    </DropdownMenuItem>\r\n                    <DropdownMenuSeparator />\r\n                    <DropdownMenuItem onClick={handleSignOut} className=\"text-red-500 focus:text-red-500 cursor-pointer\">\r\n                        <LogOut className=\"mr-2 h-4 w-4\" />\r\n                        <span>Se déconnecter</span>\r\n                    </DropdownMenuItem>\r\n                </DropdownMenuContent>\r\n            </DropdownMenu>\r\n        </>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\auth-modal.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\auth-modal.tsx:29:9\n  27 |\n  28 |     useEffect(() => {\n> 29 |         setOrigin(window.location.origin);\n     |         ^^^^^^^^^ Avoid calling setState() directly within an effect\n  30 |     }, []);\n  31 |\n  32 |     useEffect(() => {","line":29,"column":9,"nodeType":null,"endLine":29,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { Auth } from '@supabase/auth-ui-react';\r\nimport { ThemeSupa } from '@supabase/auth-ui-shared';\r\nimport { supabase } from '@/lib/supabase';\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\r\nimport { useTheme } from 'next-themes';\r\nimport { useAuth } from '@/components/auth-provider';\r\nimport { useEffect, useState } from 'react';\r\nimport { VisuallyHidden } from '@radix-ui/react-visually-hidden';\r\n\r\ninterface AuthModalProps {\r\n    trigger?: React.ReactNode;\r\n    open?: boolean;\r\n    onOpenChange?: (open: boolean) => void;\r\n}\r\n\r\nexport function AuthModal({ trigger, open: controlledOpen, onOpenChange: setControlledOpen }: AuthModalProps) {\r\n    const { theme } = useTheme();\r\n    const { user } = useAuth();\r\n    const [internalOpen, setInternalOpen] = useState(false);\r\n    const [origin, setOrigin] = useState('');\r\n\r\n    const isControlled = controlledOpen !== undefined;\r\n    const open = isControlled ? controlledOpen : internalOpen;\r\n    const setOpen = isControlled ? setControlledOpen : setInternalOpen;\r\n\r\n    useEffect(() => {\r\n        setOrigin(window.location.origin);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (user && open) {\r\n            setOpen?.(false);\r\n        }\r\n    }, [user, open, setOpen]);\r\n\r\n    if (!origin) return null;\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={setOpen}>\r\n            {trigger && <DialogTrigger asChild>{trigger}</DialogTrigger>}\r\n            <DialogContent className=\"sm:max-w-[400px]\">\r\n                <DialogHeader>\r\n                    <DialogTitle className=\"text-2xl text-center\">Connexion</DialogTitle>\r\n                    <VisuallyHidden>\r\n                        <DialogDescription>\r\n                            Connectez-vous à votre compte rdychk\r\n                        </DialogDescription>\r\n                    </VisuallyHidden>\r\n                </DialogHeader>\r\n                <div className=\"mt-4\">\r\n                    <Auth\r\n                        supabaseClient={supabase}\r\n                        appearance={{\r\n                            theme: ThemeSupa,\r\n                            variables: {\r\n                                default: {\r\n                                    colors: {\r\n                                        brand: 'hsl(var(--primary))',\r\n                                        brandAccent: 'hsl(var(--primary) / 0.9)',\r\n                                        brandButtonText: 'hsl(var(--primary-foreground))',\r\n                                        defaultButtonBackground: 'hsl(var(--secondary))',\r\n                                        defaultButtonBackgroundHover: 'hsl(var(--secondary) / 0.8)',\r\n                                        defaultButtonBorder: 'hsl(var(--border))',\r\n                                        defaultButtonText: 'hsl(var(--foreground))',\r\n                                        dividerBackground: 'hsl(var(--border))',\r\n                                        inputBackground: 'transparent',\r\n                                        inputBorder: 'hsl(var(--input))',\r\n                                        inputBorderHover: 'hsl(var(--ring))',\r\n                                        inputBorderFocus: 'hsl(var(--ring))',\r\n                                        inputText: 'hsl(var(--foreground))',\r\n                                        inputLabelText: 'hsl(var(--muted-foreground))',\r\n                                        inputPlaceholder: 'hsl(var(--muted-foreground))',\r\n                                        messageText: 'hsl(var(--muted-foreground))',\r\n                                        messageTextDanger: 'hsl(var(--destructive))',\r\n                                        anchorTextColor: 'hsl(var(--primary))',\r\n                                        anchorTextHoverColor: 'hsl(var(--primary) / 0.8)',\r\n                                    },\r\n                                    radii: {\r\n                                        borderRadiusButton: '0.5rem',\r\n                                        buttonBorderRadius: '0.5rem',\r\n                                        inputBorderRadius: '0.5rem',\r\n                                    },\r\n                                },\r\n                            },\r\n                            className: {\r\n                                container: 'w-full',\r\n                                button: 'w-full flex justify-center items-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 h-9 px-4 py-2 my-2',\r\n                                input: 'flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50',\r\n                                label: 'text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 mb-2 block',\r\n                                loader: 'animate-spin',\r\n                                anchor: 'underline hover:text-primary transition-colors',\r\n                            },\r\n                        }}\r\n                        theme={theme === 'dark' ? 'dark' : 'default'}\r\n                        providers={['google']}\r\n                        redirectTo={`${origin}/`}\r\n                        localization={{\r\n                            variables: {\r\n                                sign_in: {\r\n                                    email_label: 'Adresse email',\r\n                                    password_label: 'Mot de passe',\r\n                                    button_label: 'Se connecter',\r\n                                    loading_button_label: 'Connexion en cours...',\r\n                                    link_text: \"Vous n'avez pas de compte ? Inscrivez-vous\",\r\n                                },\r\n                                sign_up: {\r\n                                    email_label: 'Adresse email',\r\n                                    password_label: 'Mot de passe',\r\n                                    button_label: \"S'inscrire\",\r\n                                    loading_button_label: 'Inscription en cours...',\r\n                                    link_text: \"Vous avez déjà un compte ? Connectez-vous\",\r\n                                },\r\n                                forgotten_password: {\r\n                                    link_text: 'Mot de passe oublié ?',\r\n                                    button_label: 'Envoyer les instructions',\r\n                                    loading_button_label: 'Envoi en cours...',\r\n                                    email_label: 'Adresse email',\r\n                                },\r\n                            },\r\n                        }}\r\n                    />\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\auth-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\mode-toggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\navbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\profile-modal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1809,1812],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1809,1812],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { useAuth } from \"@/components/auth-provider\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { Sparkles, Loader2 } from \"lucide-react\";\r\n\r\ninterface ProfileModalProps {\r\n    open?: boolean;\r\n    onOpenChange?: (open: boolean) => void;\r\n}\r\n\r\nexport function ProfileModal({ open, onOpenChange }: ProfileModalProps) {\r\n    const { user, profile, refreshProfile } = useAuth();\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [name, setName] = useState(\"\");\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    // Pre-fill name from profile\r\n    useEffect(() => {\r\n        if (open) {\r\n            if (profile?.display_name) {\r\n                setName(profile.display_name);\r\n            }\r\n            setError(null);\r\n        }\r\n    }, [open, profile]);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!user || !name.trim()) return;\r\n\r\n        setIsLoading(true);\r\n        setError(null);\r\n        try {\r\n            const { error: upsertError } = await supabase\r\n                .from('profiles')\r\n                .upsert({\r\n                    id: user.id,\r\n                    display_name: name.trim(),\r\n                    avatar_url: profile?.avatar_url,\r\n                    updated_at: new Date().toISOString(),\r\n                });\r\n\r\n            if (upsertError) throw upsertError;\r\n\r\n            await refreshProfile();\r\n            onOpenChange?.(false);\r\n        } catch (err: any) {\r\n            console.error('Error updating profile:', err);\r\n            setError(err.message || \"Une erreur est survenue lors de l'enregistrement.\");\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={onOpenChange}>\r\n            <DialogContent className=\"sm:max-w-[425px]\">\r\n                <DialogHeader>\r\n                    <DialogTitle className=\"text-2xl\">\r\n                        {profile?.is_inferred ? \"Bienvenue !\" : \"Modifier mon profil\"}\r\n                    </DialogTitle>\r\n                    <DialogDescription>\r\n                        {profile?.is_inferred\r\n                            ? \"Pour commencer, choisissez le nom que vous utiliserez dans les groupes.\"\r\n                            : \"Mettez à jour votre nom d'affichage.\"}\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <form onSubmit={handleSubmit} className=\"space-y-4 py-4\">\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"display-name\">Votre Prénom</Label>\r\n                        <Input\r\n                            id=\"display-name\"\r\n                            value={name}\r\n                            onChange={(e) => setName(e.target.value)}\r\n                            placeholder=\"Ex: Thomas\"\r\n                            autoFocus\r\n                            minLength={2}\r\n                            maxLength={30}\r\n                        />\r\n                    </div>\r\n\r\n                    {error && (\r\n                        <p className=\"text-sm text-red-500 font-medium animate-pulse\">\r\n                            {error}\r\n                        </p>\r\n                    )}\r\n\r\n                    <div className=\"flex justify-end gap-3 pt-2\">\r\n                        <Button\r\n                            type=\"submit\"\r\n                            disabled={!name.trim() || isLoading}\r\n                            className=\"bg-primary text-primary-foreground\"\r\n                        >\r\n                            {isLoading ? (\r\n                                <>\r\n                                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                                    Enregistrement...\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    {profile?.is_inferred ? \"C'est parti !\" : \"Enregistrer\"}\r\n                                    {!isLoading && <Sparkles className=\"ml-2 h-4 w-4\" />}\r\n                                </>\r\n                            )}\r\n                        </Button>\r\n                    </div>\r\n                </form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\theme-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\ui\\alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\ui\\radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\ui\\slider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\components\\ui\\textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\jest.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\lib\\slug.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\lib\\slug.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\lib\\supabase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\tailwind.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\types\\database.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\vitest.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\cyci_\\OneDrive\\Documents\\rdychk\\rdychk\\vitest.setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]